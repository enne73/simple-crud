<div class="container" style="max-width: 400px;">
  <div class="form-group text-right">
    <a href="/users/search" class="btn btn-sm btn-light"><i class="fas fa-search"></i></a>
    {{#if user._id}}
      <a href="/users/add" class="btn btn-sm btn-light"><i class="fas fa-plus"></i></a>
      <!-- <a href="/users/delete/{{user._id}}" class="btn btn-sm btn-light"><i class="far fa-trash-alt"></i></a> -->

      <!-- <button type="button" class="btn btn-sm btn-light" onclick='deleteUser("{{user._id}}")'><i class="far fa-trash-alt"></i></button> -->
      <button type="button" class="btn btn-sm btn-light" data-toggle="modal" data-target="#exampleModalCenter" ><i class="far fa-trash-alt"></i></button>



    {{/if}}
    <div class="text-muted small"><br/>
      {{#if user._id}}{{user._id}}{{else}}&nbsp;{{/if}}
    </div>
  </div>
  <form action="/users/persist" method="POST" >
    <input type="hidden" id="_id" name="_id" value="{{user._id}}" />
    <div class="form-group">
      <label for="first">nome</label>
      <input type="text" class="form-control" id="first" name="first" value="{{user.name.first}}" autofocus/>
    </div>
    <div class="form-group">
      <label for="apellidos">cognome</label>
      <input type="text" class="form-control" id="last" name="last" value="{{user.name.last}}" />
    </div>
    <div class="form-group">
      <label for="e-mail">e-mail</label>
      <input type="email" class="form-control" id="email" name="email" value="{{user.email}}" />
    </div>
    <div class="form-group text-right">
      <button type="submit" class="btn btn-primary">conferma</button>
    </div>
  </form>
</div>



<!-- Modal -->
<div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <!-- <i class="fas fa-exclamation-circle"></i> -->
        <h5 class="modal-title" id="exampleModalLongTitle"></h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-center">
        <i class="far fa-trash-alt fa-3x"></i>
        <!-- <i class="fas fa-question fa-3x"></i> -->
        <i class="far fa-question-circle fa-3x"></i>
      </div>
      <div class="modal-footer">
        <!-- btn-sm -->
        <button type="button" class="btn btn-secondary" data-dismiss="modal"><i class="fas fa-times"></i> annulla</button>
        <button type="button" class="btn btn-danger" onclick='deleteUser("{{user._id}}")'><i class="far fa-trash-alt"></i> continua</button>
      </div>
    </div>
  </div>
</div>


{{#section 'js-block'}}
  <script>
    $(function() {
      {{#if op}}
        $.snackbar({
          content: '<i class="far fa-grin-alt"></i> {{op}}',
          htmlAllowed: true,
        });
      {{/if}}
    });

    function deleteUser(userid) {
      console.log('deleteUser', userid);
      $.snackbar({
        content: '<i class="fa fa-cog fa-spin fa-fw"></i>&nbsp;operazione in corso',
        timeout: 0,
        htmlAllowed: true
      });



      $.post("/users/delete", {
        id: userid
      }, function(data) {
        console.log(data);
          window.location = '/users/detail/delete/' + userid;
      });
    }
  </script>
{{/section}}
